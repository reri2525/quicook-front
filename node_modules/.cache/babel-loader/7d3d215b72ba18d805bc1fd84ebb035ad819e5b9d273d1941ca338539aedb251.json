{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/app/src/components/Profile.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext, Fragment } from 'react';\nimport { MainContext } from '../App';\nimport '../ScssFile/Profile.scss';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorder from '@mui/icons-material/FavoriteBorder';\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\nimport PlayCircleOutlineIcon from '@mui/icons-material/PlayCircleOutline';\nimport FollowingIndex from './FollowingIndex';\nimport FollowersIndex from './FollowersIndex';\nimport { url } from \"../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Profile(props) {\n  _s();\n  const context = useContext(MainContext);\n  const loggedInStatus = context.loggedInStatus;\n  const relationshipCreate = context.relationshipCreate;\n  const relationshipDestroy = context.relationshipDestroy;\n  const setPromptingAccountCreation = context.setPromptingAccountCreation;\n  const currentUser = context.user;\n  const [user, setUser] = useState([]);\n  const [relationship, setRelationship] = useState(false);\n  const [follow, setFollow] = useState(0);\n  const [follower, setFollower] = useState(0);\n  const [postsCount, setPostsCount] = useState(0);\n  const [followingIndexModal, setFollowingIndexModal] = useState(false);\n  const [followersIndexModal, setFollowersIndexModal] = useState(false);\n  const params = useParams();\n  const id = params.id;\n  const number = params.number;\n  const numericNumber = parseInt(id);\n  const history = useHistory();\n  const [postall, setPostall] = useState([]);\n  const [pagecount, setPagecount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(numericNumber);\n  const page = [...Array(pagecount).keys()].map(i => i + 1);\n  const [bookmarkedPosts, setBookmarkedPosts] = useState([0]);\n  const [heartedPosts, setHeartedPosts] = useState([0]);\n  const [postExist, setPostExist] = useState(true);\n  useEffect(() => {\n    setPostall([]);\n    openPlofile(id);\n  }, [id]);\n  useEffect(() => {\n    setPostall([]);\n    postAllGet(id);\n  }, [number, id]);\n  const openPlofile = id => {\n    axios.get(`${url}/users/${id}`, {\n      withCredentials: true\n    }).then(response => {\n      const data = response.data;\n      setUser(data.user);\n      setFollow(data.followed_count);\n      setFollower(data.follower_count);\n      setRelationship(data.relationship);\n      setPostsCount(data.posts_count);\n      console.log(data);\n    }).catch(error => console.log(\"ユーザーいない\"));\n  };\n  const handleRelationship = id => {\n    if (relationship) {\n      setRelationship(false);\n      setFollower(follower - 1);\n      relationshipDestroy(id);\n    } else {\n      if (loggedInStatus === \"ログインなう\") {\n        setRelationship(true);\n        setFollower(follower + 1);\n      }\n      relationshipCreate(id);\n    }\n  };\n  const postShow = id => {\n    history.push(`/posts/${id}`);\n  };\n  const postAllGet = id => {\n    axios.get(`${url}/user/${id}/posts`, {\n      params: {\n        page: currentPage\n      },\n      withCredentials: true\n    }).then(response => {\n      if (response.data.status) {\n        const data = response.data.post_all;\n        setPostall(data);\n        setPagecount(response.data.total_pages);\n        console.log(\"投稿取得成功\");\n        for (let i = 0; i < data.length; i++) {\n          bookmarkExist(data[i]);\n        }\n        for (let i = 0; i < data.length; i++) {\n          heartExist(data[i]);\n        }\n        setPostExist(true);\n      } else {\n        setPostExist(false);\n        setPagecount(0);\n        setCurrentPage(1);\n        console.log(\"投稿なし\");\n      }\n    }).catch(error => {\n      console.log(\"投稿取得エラー\", error);\n    });\n  };\n  const postAdd = page => {\n    setCurrentPage(page);\n    history.push(`/profile/${id}/page/${page}`);\n    window.scrollTo(0, 0);\n  };\n  const postBack = currentPage => {\n    if (currentPage !== 1) {\n      setCurrentPage(currentPage - 1);\n      history.push(`/profile/${id}/page/${currentPage - 1}`);\n    }\n    window.scrollTo(0, 0);\n  };\n  const postGo = currentPage => {\n    if (currentPage !== pagecount) {\n      setCurrentPage(currentPage + 1);\n      history.push(`/profile/${id}/page/${currentPage + 1}`);\n    }\n    window.scrollTo(0, 0);\n  };\n  const handleBookmark = post => {\n    if (bookmarkedPosts.includes(post.id)) {\n      props.bookmarkDestroy(post);\n      setBookmarkedPosts(bookmarkedPosts.filter(id => id !== post.id));\n    } else {\n      props.bookmarkCreate(post);\n      if (loggedInStatus === \"ログインなう\") {\n        setBookmarkedPosts([...bookmarkedPosts, post.id]);\n      }\n    }\n  };\n  const bookmarkExist = post => {\n    setBookmarkedPosts(prevBookmarkedPosts => {\n      if (post.bookmarks && post.bookmarks[0]) {\n        return [...prevBookmarkedPosts, post.id];\n      } else {\n        return prevBookmarkedPosts.filter(id => id !== post.id);\n      }\n    });\n  };\n  const handleHeart = post => {\n    if (heartedPosts.includes(post.id)) {\n      props.heartDestroy(post);\n      setHeartedPosts(heartedPosts.filter(id => id !== post.id));\n      post.heart_count = post.heart_count - 1;\n    } else {\n      props.heartCreate(post);\n      if (loggedInStatus === \"ログインなう\") {\n        setHeartedPosts([...heartedPosts, post.id]);\n        post.heart_count = post.heart_count + 1;\n      }\n    }\n  };\n  const heartExist = post => {\n    setHeartedPosts(prevHeartedPosts => {\n      if (post.hearts && post.hearts[0]) {\n        return [...prevHeartedPosts, post.id];\n      } else {\n        return prevHeartedPosts.filter(id => id !== post.id);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [user && user.id && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile_container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"image\",\n          src: user.avatar.url,\n          alt: \"User Avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"explanation\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"user_name\",\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 9\n        }, this), user.id === currentUser.id ? /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/edit\",\n          style: {\n            textDecoration: 'none',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"edit_profile\",\n            children: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u7DE8\\u96C6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this) : relationship ? /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"unfollow\",\n          onClick: () => handleRelationship(user.id),\n          children: \"\\u30D5\\u30A9\\u30ED\\u30FC\\u4E2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"follow\",\n          onClick: () => handleRelationship(user.id),\n          children: \"\\u30D5\\u30A9\\u30ED\\u30FC\\u3059\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user_data\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            children: [\"\\u6295\\u7A3F  \", postsCount ? postsCount : 0, \" \\u4EF6\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"follow_modal\",\n            onClick: () => setFollowingIndexModal(true),\n            children: [\"\\u30D5\\u30A9\\u30ED\\u30FC \", follow ? follow : 0, \" \\u4EBA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"follow_modal\",\n            onClick: () => setFollowersIndexModal(true),\n            children: [\"\\u30D5\\u30A9\\u30ED\\u30EF\\u30FC \", follower ? follower : 0, \" \\u4EBA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            children: user.introduction\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }, this), postExist ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post_not_exist\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u304A\\u3063\\u3068\\u3053\\u306E\\u30E6\\u30FC\\u30B6\\u30FC\\u306B\\u306F\\u30B3\\u30F3\\u30C6\\u30F3\\u30C4\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(HighlightOffIcon, {\n          className: \"highlight_off_icon\",\n          style: {\n            fontSize: '60px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 10\n    }, this), postall[0] ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post_container_profile\",\n      children: [postExist ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u8AB0\\u3082\\u6295\\u7A3F\\u3057\\u3066\\u306A\\u3044\\u306E\\uFF01\\uFF1F\\u307E\\u3058\\uFF1F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 29\n      }, this), postall.map((value, key) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post\",\n          onClick: () => postShow(postall[key].id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"head\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: value.user.avatar.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${value.user.id}/page/1`,\n              onClick: e => {\n                e.stopPropagation();\n              },\n              children: value.user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bookmark\",\n              onClick: e => {\n                e.stopPropagation();\n                handleBookmark(value);\n              },\n              children: bookmarkedPosts.includes(value.id) ? /*#__PURE__*/_jsxDEV(BookmarkIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 59\n              }, this) : /*#__PURE__*/_jsxDEV(BookmarkBorderIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 77\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 16\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"middle\",\n            children: [value.file_type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: value.thumbnail.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), value.file_type === \"video\" ? /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: value.thumbnail.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(PlayCircleOutlineIcon, {\n                className: \"play_icon\",\n                style: {\n                  fontSize: '50px',\n                  color: 'white',\n                  fontWeight: '200'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"foot\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              children: value.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"favorite\",\n              onClick: e => {\n                e.stopPropagation();\n                handleHeart(value);\n              },\n              children: heartedPosts.includes(value.id) ? /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                style: {\n                  color: 'red'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 54\n              }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorder, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 97\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"heart_count\",\n              children: value.heart_count\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 12\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 10\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), postall.length === 0 && postExist ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post_skeleton_container_profile\",\n      children: [...Array(20).keys()].map(i => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post_skeleton\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 16\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pagenate_container\",\n      children: pagecount > 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagenate\",\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"back\",\n          children: \"back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"page_move\",\n          onClick: () => postBack(currentPage),\n          children: /*#__PURE__*/_jsxDEV(NavigateBeforeIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 9\n        }, this), currentPage === 1 ? \"\" : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 1 === currentPage ? 'active' : '',\n          onClick: () => postAdd(1),\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 10\n        }, this), pagecount > 6 && currentPage > pagecount - 6 ? page.slice(pagecount - 6, pagecount).map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: page === currentPage ? 'active' : '',\n          onClick: () => postAdd(page),\n          children: page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 10\n        }, this)) : page.slice(currentPage < 7 && currentPage !== 1 ? 1 : currentPage - 1, currentPage === 1 ? currentPage + 6 : currentPage < 7 ? 7 : currentPage + 5).map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: page === currentPage ? 'active' : '',\n          onClick: () => postAdd(page),\n          children: page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 10\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"page_move\",\n          onClick: () => postGo(currentPage),\n          children: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"next\",\n          children: \"next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 8\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), followingIndexModal ? /*#__PURE__*/_jsxDEV(FollowingIndex, {\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), followersIndexModal ? /*#__PURE__*/_jsxDEV(FollowersIndex, {\n      user: user,\n      currentUser: props.user,\n      setFollowersIndexModal: setFollowersIndexModal,\n      setPromptingAccountCreation: setPromptingAccountCreation,\n      loggedInStatus: loggedInStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 4\n  }, this);\n}\n_s(Profile, \"xZCTQmJQ+IIuOmJYSvBFyyyR2i8=\", false, function () {\n  return [useParams, useHistory];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["useState","useEffect","useContext","Fragment","MainContext","axios","Link","useParams","useHistory","BookmarkIcon","BookmarkBorderIcon","FavoriteIcon","FavoriteBorder","NavigateBeforeIcon","NavigateNextIcon","HighlightOffIcon","PlayCircleOutlineIcon","FollowingIndex","FollowersIndex","url","jsxDEV","_jsxDEV","_Fragment","Profile","props","_s","context","loggedInStatus","relationshipCreate","relationshipDestroy","setPromptingAccountCreation","currentUser","user","setUser","relationship","setRelationship","follow","setFollow","follower","setFollower","postsCount","setPostsCount","followingIndexModal","setFollowingIndexModal","followersIndexModal","setFollowersIndexModal","params","id","number","numericNumber","parseInt","history","postall","setPostall","pagecount","setPagecount","currentPage","setCurrentPage","page","Array","keys","map","i","bookmarkedPosts","setBookmarkedPosts","heartedPosts","setHeartedPosts","postExist","setPostExist","openPlofile","postAllGet","get","withCredentials","then","response","data","followed_count","follower_count","posts_count","console","log","catch","error","handleRelationship","postShow","push","status","post_all","total_pages","length","bookmarkExist","heartExist","postAdd","window","scrollTo","postBack","postGo","handleBookmark","post","includes","bookmarkDestroy","filter","bookmarkCreate","prevBookmarkedPosts","bookmarks","handleHeart","heartDestroy","heart_count","heartCreate","prevHeartedPosts","hearts","children","className","src","avatar","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","to","style","textDecoration","cursor","onClick","introduction","fontSize","value","key","e","stopPropagation","file_type","thumbnail","color","fontWeight","title","slice","_c","$RefreshReg$"],"sources":["/usr/src/app/app/src/components/Profile.tsx"],"sourcesContent":["import { useState, useEffect, useContext, Fragment } from 'react';\nimport { MainContext } from '../App';\nimport '../ScssFile/Profile.scss'\nimport axios from 'axios';\nimport { Link } from 'react-router-dom'\nimport { useParams } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorder from '@mui/icons-material/FavoriteBorder';\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\nimport PlayCircleOutlineIcon from '@mui/icons-material/PlayCircleOutline';\nimport FollowingIndex from './FollowingIndex';\nimport FollowersIndex from './FollowersIndex';\nimport { url } from \"../config\";\nfunction Profile(props: any) {\n  const context = useContext(MainContext)\n  const loggedInStatus = context.loggedInStatus\n  const relationshipCreate = context.relationshipCreate\n  const relationshipDestroy = context.relationshipDestroy\n  const setPromptingAccountCreation = context.setPromptingAccountCreation\n  const currentUser = context.user\n  const [user, setUser] = useState<any>([])\n  const [relationship, setRelationship] = useState(false)\n  const [follow, setFollow] = useState(0)\n  const [follower, setFollower] = useState(0)\n  const [postsCount, setPostsCount] = useState(0)\n  const [followingIndexModal, setFollowingIndexModal] = useState(false)\n  const [followersIndexModal, setFollowersIndexModal] = useState(false)\n  const params = useParams<{ id: string, number: string }>();\n  const id = params.id\n  const number = params.number\n  const numericNumber = parseInt(id);\n  const history = useHistory();\n  const [postall, setPostall] = useState<any>([])\n  const [pagecount, setPagecount] = useState(0)\n  const [currentPage, setCurrentPage] = useState(numericNumber)\n  const page = [...Array(pagecount).keys()].map((i) => i + 1);\n  const [bookmarkedPosts, setBookmarkedPosts] = useState([0]);\n  const [heartedPosts, setHeartedPosts] = useState([0]);\n  const [postExist, setPostExist] = useState(true)\n\n  useEffect(() => {\n    setPostall([])\n    openPlofile(id)\n  }, [id])\n\n  useEffect(() => {\n    setPostall([])\n    postAllGet(id)\n  }, [number, id])\n\n  const openPlofile = (id: string) => {\n    axios.get(`${url}/users/${id}`, { withCredentials: true })\n    .then(response => {\n        const data: any = response.data\n        setUser(data.user)\n        setFollow(data.followed_count)\n        setFollower(data.follower_count)\n        setRelationship(data.relationship)\n        setPostsCount(data.posts_count)\n        console.log(data)\n    })\n    .catch(error => console.log(\"ユーザーいない\"))\n  }\n\n  const handleRelationship = (id: number) => {\n    if (relationship) {\n     setRelationship(false)\n     setFollower(follower - 1)\n     relationshipDestroy(id)\n    } else {\n     if (loggedInStatus === \"ログインなう\") {\n       setRelationship(true)\n       setFollower(follower + 1)\n     }\n     relationshipCreate(id)\n    }\n  }\n\n  const postShow = (id: string) => {\n    history.push(`/posts/${id}`)\n  }\n\n  const postAllGet = (id: string) =>{\n     axios.get(`${url}/user/${id}/posts`, { params: { page: currentPage }, withCredentials: true })\n    .then(response => {\n      if (response.data.status) {\n        const data = response.data.post_all\n        setPostall(data)\n        setPagecount(response.data.total_pages)\n        console.log(\"投稿取得成功\")\n        for (let i = 0; i < data.length; i++) {\n          bookmarkExist(data[i]);\n        }\n        for (let i = 0; i < data.length; i++) {\n          heartExist(data[i]);\n        }\n        setPostExist(true)\n      } else {\n        setPostExist(false)\n        setPagecount(0)\n        setCurrentPage(1)\n        console.log(\"投稿なし\")\n      }\n    })\n    .catch(error => {\n      console.log(\"投稿取得エラー\", error)\n    })\n  }\n  const postAdd = (page: number) => {\n    setCurrentPage(page)\n    history.push(`/profile/${id}/page/${page}`)\n    window.scrollTo(0, 0);\n  }\n  const postBack = (currentPage: number) => {\n    if (currentPage !== 1) {\n      setCurrentPage(currentPage - 1)\n      history.push(`/profile/${id}/page/${currentPage - 1}`)\n      }\n    window.scrollTo(0, 0);\n  }\n  const postGo = (currentPage: number) => {\n    if (currentPage !== pagecount) {\n      setCurrentPage(currentPage + 1)\n      history.push(`/profile/${id}/page/${currentPage + 1}`)\n    }\n    window.scrollTo(0, 0);\n  }\n  const handleBookmark = (post: any) => {\n    if  (bookmarkedPosts.includes(post.id)) {\n     props.bookmarkDestroy(post)\n     setBookmarkedPosts(bookmarkedPosts.filter(id => id !== post.id));\n    } else {\n     props.bookmarkCreate(post)\n     if (loggedInStatus === \"ログインなう\") {\n      setBookmarkedPosts([...bookmarkedPosts, post.id]);\n     }\n    }\n   }\n  const bookmarkExist = (post: any) => {\n    setBookmarkedPosts((prevBookmarkedPosts) => {\n      if (post.bookmarks && post.bookmarks[0]) {\n        return [...prevBookmarkedPosts, post.id];\n      } else {\n        return prevBookmarkedPosts.filter(id => id !== post.id);\n      }\n    });\n  }\n  const handleHeart = (post: any) => {\n    if  (heartedPosts.includes(post.id)) {\n     props.heartDestroy(post)\n     setHeartedPosts(heartedPosts.filter(id => id !== post.id));\n     post.heart_count = post.heart_count - 1\n    } else {\n     props.heartCreate(post)\n     if (loggedInStatus === \"ログインなう\") {\n      setHeartedPosts([...heartedPosts, post.id]);\n      post.heart_count = post.heart_count + 1\n     }\n    }\n  }\n  const heartExist = (post: any) => {\n    setHeartedPosts((prevHeartedPosts) => {\n      if (post.hearts && post.hearts[0]) {\n        return [...prevHeartedPosts, post.id];\n      } else {\n        return prevHeartedPosts.filter(id => id !== post.id);\n      }\n    });\n  }\n  return (\n   <Fragment>\n    {user  && user.id && (\n    <div className='profile_container'>\n      <div className='icon'>\n        <img className='image' src={user.avatar.url} alt=\"User Avatar\" />\n      </div>\n      <div className='explanation'>\n        <a className='user_name'>{user.name}</a>\n        { user.id === currentUser.id ? \n          <Link to=\"/edit\" style={{ textDecoration: 'none', cursor: 'pointer' }}>\n            <a className='edit_profile'>プロフィール編集</a>\n          </Link> \n            : \n          relationship ?\n              <a className=\"unfollow\" onClick={() => handleRelationship(user.id)}>フォロー中</a>\n                :\n              <a className=\"follow\" onClick={() => handleRelationship(user.id)}>フォローする</a>\n        }\n        <div className='user_data'>\n         <a>投稿  {postsCount ? postsCount : 0 } 件</a>\n         <a className='follow_modal' onClick={() => setFollowingIndexModal(true)}>フォロー {follow ? follow : 0 } 人</a>\n         <a className='follow_modal' onClick={() => setFollowersIndexModal(true)}>フォロワー {follower ? follower : 0 } 人</a>\n         <pre>{user.introduction}</pre>\n        </div>\n      </div>\n    </div>\n    )}\n    { postExist ? \n         <></> \n           : \n         <Fragment>\n           <div className='post_not_exist'>\n             <h1>おっとこのユーザーにはコンテンツがありません...</h1>\n             <HighlightOffIcon className='highlight_off_icon' style={{fontSize: '60px'}}/>\n           </div>\n         </Fragment>\n    } \n    { postall[0] ? \n      <div className='post_container_profile'>\n       {postExist ? <></> : <h1>誰も投稿してないの！？まじ？</h1>} \n       {postall.map((value: any, key: number) => {\n         return (\n         <div className='post' key={key} onClick={() => postShow(postall[key].id)}>\n           <div className='head'>\n             <div className='icon'>\n             <img src={value.user.avatar.url}></img>\n             </div>\n               <Link to={`/profile/${value.user.id}/page/1`}\n                  onClick={(e) => {e.stopPropagation();} }>\n                     {value.user.name}\n               </Link>\n               <div className='bookmark' onClick={(e) => {e.stopPropagation(); handleBookmark(value); } }>\n                    {bookmarkedPosts.includes(value.id) ? <BookmarkIcon/> : <BookmarkBorderIcon/>}\n               </div>\n           </div>\n           <div className='middle'>\n              { value.file_type === \"image\" ? <img src={value.thumbnail.url}></img> : <></> }\n              { value.file_type === \"video\" ? \n                  <Fragment>\n                    <img src={value.thumbnail.url}></img>\n                    <PlayCircleOutlineIcon className='play_icon' style={{fontSize: '50px', color: 'white', fontWeight: '200'}}/> \n                  </Fragment>\n                     : \n                  <></> \n              }\n           </div>\n           <div className='foot'>\n             <a>{value.title}</a>\n             <div className='favorite' onClick={(e) => {e.stopPropagation(); handleHeart(value); }}>\n                  {heartedPosts.includes(value.id) ? <FavoriteIcon style={{ color: 'red' }}/> : <FavoriteBorder/>}\n             </div>\n             <a className='heart_count'>{value.heart_count}</a>\n           </div>\n         </div>\n         )\n       })}\n      </div>\n      : <></> }\n      { postall.length === 0 && postExist ? \n               <div className='post_skeleton_container_profile'>\n                 {[...Array(20).keys()].map(i =>\n                    <div className='post_skeleton'></div>\n                 )}\n               </div> :\n      <div className='pagenate_container'>\n       {pagecount > 1 ? \n       <div className='pagenate'><nav className='back'>back</nav>\n        <button className='page_move' onClick={() => postBack(currentPage)}><NavigateBeforeIcon/></button>\n        { currentPage === 1 ? \"\" :\n         <button \n           className={1 === currentPage ? 'active' : ''}\n           onClick={() => postAdd(1)}>\n              1\n          </button>}\n        {pagecount > 6 && currentPage > pagecount - 6 ? \n        page.slice(pagecount - 6, pagecount ).map((page) => (\n         <button \n          className={page === currentPage ? 'active' : ''}\n          onClick={() => postAdd(page)}>\n              {page}\n         </button>\n         )) :\n        page.slice(currentPage < 7 && currentPage !== 1 ? 1 : currentPage - 1, currentPage === 1 ? currentPage + 6 : currentPage < 7 ? 7 : currentPage + 5 ).map((page) => (\n         <button \n          className={page === currentPage ? 'active' : ''}\n          onClick={() => postAdd(page)}>\n              {page}\n         </button>\n         ))}\n        <button className='page_move' \n           onClick={() => postGo(currentPage)}>\n            <NavigateNextIcon/>\n        </button>\n        <nav className='next'>next</nav>\n       </div> : <></> }\n      </div>}\n    { followingIndexModal ? <FollowingIndex user={user} /> : <></> }\n    { followersIndexModal ? <FollowersIndex user={user} currentUser={props.user} setFollowersIndexModal={setFollowersIndexModal} \n                                            setPromptingAccountCreation={setPromptingAccountCreation}\n                                            loggedInStatus={loggedInStatus}/>\n                                             :\n                                            <></>\n    }\n   </Fragment>\n  )\n}\n\nexport default Profile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}