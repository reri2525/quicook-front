{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/app/src/components/Profile.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, Fragment } from 'react';\nimport '../ScssFile/Profile.scss';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorder from '@mui/icons-material/FavoriteBorder';\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\nimport PlayCircleOutlineIcon from '@mui/icons-material/PlayCircleOutline';\nimport FollowingIndex from './FollowingIndex';\nimport FollowersIndex from './FollowersIndex';\nimport { url } from \"../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Profile(props) {\n  _s();\n  const loggedInStatus = props.loggedInStatus;\n  const relationshipCreate = props.relationshipCreate;\n  const relationshipDestroy = props.relationshipDestroy;\n  const setPromptingAccountCreation = props.setPromptingAccountCreation;\n  const [user, setUser] = useState([]);\n  const [relationship, setRelationship] = useState(false);\n  const [follow, setFollow] = useState(0);\n  const [follower, setFollower] = useState(0);\n  const [postsCount, setPostsCount] = useState(0);\n  const [followingIndexModal, setFollowingIndexModal] = useState(false);\n  const [followersIndexModal, setFollowersIndexModal] = useState(false);\n  const params = useParams();\n  const id = params.id;\n  const number = params.number;\n  const numericNumber = parseInt(id);\n  const history = useHistory();\n  const [postall, setPostall] = useState([]);\n  const [pagecount, setPagecount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(numericNumber);\n  const page = [...Array(pagecount).keys()].map(i => i + 1);\n  const [bookmarkedPosts, setBookmarkedPosts] = useState([0]);\n  const [heartedPosts, setHeartedPosts] = useState([0]);\n  const [postExist, setPostExist] = useState(true);\n  useEffect(() => {\n    setPostall([]);\n    openPlofile(id);\n  }, [id]);\n  useEffect(() => {\n    setPostall([]);\n    postAllGet(id);\n  }, [number, id]);\n  const openPlofile = id => {\n    axios.get(`${url}/users/${id}`, {\n      withCredentials: true\n    }).then(response => {\n      const data = response.data;\n      setUser(data.user);\n      setFollow(data.followed_count);\n      setFollower(data.follower_count);\n      setRelationship(data.relationship);\n      setPostsCount(data.posts_count);\n      console.log(data);\n    }).catch(error => console.log(\"ユーザーいない\"));\n  };\n  const handleRelationship = id => {\n    if (relationship) {\n      setRelationship(false);\n      setFollower(follower - 1);\n      relationshipDestroy(id);\n    } else {\n      if (loggedInStatus === \"ログインなう\") {\n        setRelationship(true);\n        setFollower(follower + 1);\n      }\n      relationshipCreate(id);\n    }\n  };\n  const postShow = id => {\n    history.push(`/posts/${id}`);\n  };\n  const postAllGet = id => {\n    axios.get(`${url}/user/${id}/posts`, {\n      params: {\n        page: currentPage\n      },\n      withCredentials: true\n    }).then(response => {\n      if (response.data.status) {\n        const data = response.data.post_all;\n        setPostall(data);\n        setPagecount(response.data.total_pages);\n        console.log(\"投稿取得成功\");\n        for (let i = 0; i < data.length; i++) {\n          bookmarkExist(data[i]);\n        }\n        for (let i = 0; i < data.length; i++) {\n          heartExist(data[i]);\n        }\n        setPostExist(true);\n      } else {\n        setPostExist(false);\n        setPagecount(0);\n        setCurrentPage(1);\n        console.log(\"投稿なし\");\n      }\n    }).catch(error => {\n      console.log(\"投稿取得エラー\", error);\n    });\n  };\n  const postAdd = page => {\n    setCurrentPage(page);\n    history.push(`/profile/${id}/page/${page}`);\n    window.scrollTo(0, 0);\n  };\n  const postBack = currentPage => {\n    if (currentPage !== 1) {\n      setCurrentPage(currentPage - 1);\n      history.push(`/profile/${id}/page/${currentPage - 1}`);\n    }\n    window.scrollTo(0, 0);\n  };\n  const postGo = currentPage => {\n    if (currentPage !== pagecount) {\n      setCurrentPage(currentPage + 1);\n      history.push(`/profile/${id}/page/${currentPage + 1}`);\n    }\n    window.scrollTo(0, 0);\n  };\n  const handleBookmark = post => {\n    if (bookmarkedPosts.includes(post.id)) {\n      props.bookmarkDestroy(post);\n      setBookmarkedPosts(bookmarkedPosts.filter(id => id !== post.id));\n    } else {\n      props.bookmarkCreate(post);\n      if (loggedInStatus === \"ログインなう\") {\n        setBookmarkedPosts([...bookmarkedPosts, post.id]);\n      }\n    }\n  };\n  const bookmarkExist = post => {\n    setBookmarkedPosts(prevBookmarkedPosts => {\n      if (post.bookmarks && post.bookmarks[0]) {\n        return [...prevBookmarkedPosts, post.id];\n      } else {\n        return prevBookmarkedPosts.filter(id => id !== post.id);\n      }\n    });\n  };\n  const handleHeart = post => {\n    if (heartedPosts.includes(post.id)) {\n      props.heartDestroy(post);\n      setHeartedPosts(heartedPosts.filter(id => id !== post.id));\n      post.heart_count = post.heart_count - 1;\n    } else {\n      props.heartCreate(post);\n      if (loggedInStatus === \"ログインなう\") {\n        setHeartedPosts([...heartedPosts, post.id]);\n        post.heart_count = post.heart_count + 1;\n      }\n    }\n  };\n  const heartExist = post => {\n    setHeartedPosts(prevHeartedPosts => {\n      if (post.hearts && post.hearts[0]) {\n        return [...prevHeartedPosts, post.id];\n      } else {\n        return prevHeartedPosts.filter(id => id !== post.id);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile_container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"image\",\n          src: user.avatar.url\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"explanation\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"user_name\",\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 9\n        }, this), user.id === props.user.id ? /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/edit\",\n          style: {\n            textDecoration: 'none',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"edit_profile\",\n            children: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u7DE8\\u96C6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this) : relationship ? /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"unfollow\",\n          onClick: () => handleRelationship(user.id),\n          children: \"\\u30D5\\u30A9\\u30ED\\u30FC\\u4E2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"follow\",\n          onClick: () => handleRelationship(user.id),\n          children: \"\\u30D5\\u30A9\\u30ED\\u30FC\\u3059\\u308B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user_data\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            children: [\"\\u6295\\u7A3F  \", postsCount ? postsCount : 0, \" \\u4EF6\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"follow_modal\",\n            onClick: () => setFollowingIndexModal(true),\n            children: [\"\\u30D5\\u30A9\\u30ED\\u30FC \", follow ? follow : 0, \" \\u4EBA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"follow_modal\",\n            onClick: () => setFollowersIndexModal(true),\n            children: [\"\\u30D5\\u30A9\\u30ED\\u30EF\\u30FC \", follower ? follower : 0, \" \\u4EBA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            children: user.introduction\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }, this), postExist ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post_not_exist\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u304A\\u3063\\u3068\\u3053\\u306E\\u30E6\\u30FC\\u30B6\\u30FC\\u306B\\u306F\\u30B3\\u30F3\\u30C6\\u30F3\\u30C4\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(HighlightOffIcon, {\n          className: \"highlight_off_icon\",\n          style: {\n            fontSize: '60px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 10\n    }, this), postall[0] ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post_container_profile\",\n      children: [postExist ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u8AB0\\u3082\\u6295\\u7A3F\\u3057\\u3066\\u306A\\u3044\\u306E\\uFF01\\uFF1F\\u307E\\u3058\\uFF1F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 29\n      }, this), postall.map((value, key) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post\",\n          onClick: () => postShow(postall[key].id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"head\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: value.user.avatar.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${value.user.id}/page/1`,\n              onClick: e => {\n                e.stopPropagation();\n              },\n              children: value.user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bookmark\",\n              onClick: e => {\n                e.stopPropagation();\n                handleBookmark(value);\n              },\n              children: bookmarkedPosts.includes(value.id) ? /*#__PURE__*/_jsxDEV(BookmarkIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 59\n              }, this) : /*#__PURE__*/_jsxDEV(BookmarkBorderIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 77\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 16\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"middle\",\n            children: [value.file_type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: value.thumbnail.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), value.file_type === \"video\" ? /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: value.thumbnail.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(PlayCircleOutlineIcon, {\n                className: \"play_icon\",\n                style: {\n                  fontSize: '50px',\n                  color: 'white',\n                  fontWeight: '200'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"foot\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              children: value.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"favorite\",\n              onClick: e => {\n                e.stopPropagation();\n                handleHeart(value);\n              },\n              children: heartedPosts.includes(value.id) ? /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                style: {\n                  color: 'red'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 54\n              }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorder, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 97\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"heart_count\",\n              children: value.heart_count\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 12\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 10\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), postall.length === 0 && postExist ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post_skeleton_container_profile\",\n      children: [...Array(20).keys()].map(i => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post_skeleton\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 16\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pagenate_container\",\n      children: pagecount > 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagenate\",\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"back\",\n          children: \"back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"page_move\",\n          onClick: () => postBack(currentPage),\n          children: /*#__PURE__*/_jsxDEV(NavigateBeforeIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 9\n        }, this), currentPage === 1 ? \"\" : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 1 === currentPage ? 'active' : '',\n          onClick: () => postAdd(1),\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 10\n        }, this), pagecount > 6 && currentPage > pagecount - 6 ? page.slice(pagecount - 6, pagecount).map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: page === currentPage ? 'active' : '',\n          onClick: () => postAdd(page),\n          children: page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 10\n        }, this)) : page.slice(currentPage < 7 && currentPage !== 1 ? 1 : currentPage - 1, currentPage === 1 ? currentPage + 6 : currentPage < 7 ? 7 : currentPage + 5).map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: page === currentPage ? 'active' : '',\n          onClick: () => postAdd(page),\n          children: page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 10\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"page_move\",\n          onClick: () => postGo(currentPage),\n          children: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"next\",\n          children: \"next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 8\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), followingIndexModal ? /*#__PURE__*/_jsxDEV(FollowingIndex, {\n      user: user,\n      currentUser: props.user,\n      setFollowingIndexModal: setFollowingIndexModal,\n      setPromptingAccountCreation: setPromptingAccountCreation,\n      loggedInStatus: loggedInStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), followersIndexModal ? /*#__PURE__*/_jsxDEV(FollowersIndex, {\n      user: user,\n      currentUser: props.user,\n      setFollowersIndexModal: setFollowersIndexModal,\n      setPromptingAccountCreation: setPromptingAccountCreation,\n      loggedInStatus: loggedInStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 4\n  }, this);\n}\n_s(Profile, \"J1cjx6ileRks4S3htvNisIaSqGQ=\", false, function () {\n  return [useParams, useHistory];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","Fragment","axios","Link","useParams","useHistory","BookmarkIcon","BookmarkBorderIcon","FavoriteIcon","FavoriteBorder","NavigateBeforeIcon","NavigateNextIcon","HighlightOffIcon","PlayCircleOutlineIcon","FollowingIndex","FollowersIndex","url","jsxDEV","_jsxDEV","_Fragment","Profile","props","_s","loggedInStatus","relationshipCreate","relationshipDestroy","setPromptingAccountCreation","user","setUser","relationship","setRelationship","follow","setFollow","follower","setFollower","postsCount","setPostsCount","followingIndexModal","setFollowingIndexModal","followersIndexModal","setFollowersIndexModal","params","id","number","numericNumber","parseInt","history","postall","setPostall","pagecount","setPagecount","currentPage","setCurrentPage","page","Array","keys","map","i","bookmarkedPosts","setBookmarkedPosts","heartedPosts","setHeartedPosts","postExist","setPostExist","openPlofile","postAllGet","get","withCredentials","then","response","data","followed_count","follower_count","posts_count","console","log","catch","error","handleRelationship","postShow","push","status","post_all","total_pages","length","bookmarkExist","heartExist","postAdd","window","scrollTo","postBack","postGo","handleBookmark","post","includes","bookmarkDestroy","filter","bookmarkCreate","prevBookmarkedPosts","bookmarks","handleHeart","heartDestroy","heart_count","heartCreate","prevHeartedPosts","hearts","children","className","src","avatar","fileName","_jsxFileName","lineNumber","columnNumber","name","to","style","textDecoration","cursor","onClick","introduction","fontSize","value","key","e","stopPropagation","file_type","thumbnail","color","fontWeight","title","slice","currentUser","_c","$RefreshReg$"],"sources":["/usr/src/app/app/src/components/Profile.tsx"],"sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport '../ScssFile/Profile.scss'\nimport axios from 'axios';\nimport { Link } from 'react-router-dom'\nimport { useParams } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorder from '@mui/icons-material/FavoriteBorder';\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\nimport PlayCircleOutlineIcon from '@mui/icons-material/PlayCircleOutline';\nimport FollowingIndex from './FollowingIndex';\nimport FollowersIndex from './FollowersIndex';\nimport { url } from \"../config\";\nfunction Profile(props: any) {\n  const loggedInStatus = props.loggedInStatus\n  const relationshipCreate = props.relationshipCreate\n  const relationshipDestroy = props.relationshipDestroy\n  const setPromptingAccountCreation = props.setPromptingAccountCreation\n  const [user, setUser] = useState<any>([])\n  const [relationship, setRelationship] = useState(false)\n  const [follow, setFollow] = useState(0)\n  const [follower, setFollower] = useState(0)\n  const [postsCount, setPostsCount] = useState(0)\n  const [followingIndexModal, setFollowingIndexModal] = useState(false)\n  const [followersIndexModal, setFollowersIndexModal] = useState(false)\n  const params = useParams<{ id: string, number: string }>();\n  const id = params.id\n  const number = params.number\n  const numericNumber = parseInt(id);\n  const history = useHistory();\n  const [postall, setPostall] = useState<any>([])\n  const [pagecount, setPagecount] = useState(0)\n  const [currentPage, setCurrentPage] = useState(numericNumber)\n  const page = [...Array(pagecount).keys()].map((i) => i + 1);\n  const [bookmarkedPosts, setBookmarkedPosts] = useState([0]);\n  const [heartedPosts, setHeartedPosts] = useState([0]);\n  const [postExist, setPostExist] = useState(true)\n\n  useEffect(() => {\n    setPostall([])\n    openPlofile(id)\n  }, [id])\n\n  useEffect(() => {\n    setPostall([])\n    postAllGet(id)\n  }, [number, id])\n\n  const openPlofile = (id: string) => {\n    axios.get(`${url}/users/${id}`, { withCredentials: true })\n    .then(response => {\n        const data = response.data\n        setUser(data.user)\n        setFollow(data.followed_count)\n        setFollower(data.follower_count)\n        setRelationship(data.relationship)\n        setPostsCount(data.posts_count)\n        console.log(data)\n    })\n    .catch(error => console.log(\"ユーザーいない\"))\n  }\n\n  const handleRelationship = (id: string) => {\n    if (relationship) {\n     setRelationship(false)\n     setFollower(follower - 1)\n     relationshipDestroy(id)\n    } else {\n     if (loggedInStatus === \"ログインなう\") {\n       setRelationship(true)\n       setFollower(follower + 1)\n     }\n     relationshipCreate(id)\n    }\n  }\n\n  const postShow = (id: string) => {\n    history.push(`/posts/${id}`)\n  }\n\n  const postAllGet = (id: string) =>{\n     axios.get(`${url}/user/${id}/posts`, { params: { page: currentPage }, withCredentials: true })\n    .then(response => {\n      if (response.data.status) {\n        const data = response.data.post_all\n        setPostall(data)\n        setPagecount(response.data.total_pages)\n        console.log(\"投稿取得成功\")\n        for (let i = 0; i < data.length; i++) {\n          bookmarkExist(data[i]);\n        }\n        for (let i = 0; i < data.length; i++) {\n          heartExist(data[i]);\n        }\n        setPostExist(true)\n      } else {\n        setPostExist(false)\n        setPagecount(0)\n        setCurrentPage(1)\n        console.log(\"投稿なし\")\n      }\n    })\n    .catch(error => {\n      console.log(\"投稿取得エラー\", error)\n    })\n  }\n  const postAdd = (page: number) => {\n    setCurrentPage(page)\n    history.push(`/profile/${id}/page/${page}`)\n    window.scrollTo(0, 0);\n  }\n  const postBack = (currentPage: number) => {\n    if (currentPage !== 1) {\n      setCurrentPage(currentPage - 1)\n      history.push(`/profile/${id}/page/${currentPage - 1}`)\n      }\n    window.scrollTo(0, 0);\n  }\n  const postGo = (currentPage: number) => {\n    if (currentPage !== pagecount) {\n      setCurrentPage(currentPage + 1)\n      history.push(`/profile/${id}/page/${currentPage + 1}`)\n    }\n    window.scrollTo(0, 0);\n  }\n  const handleBookmark = (post: any) => {\n    if  (bookmarkedPosts.includes(post.id)) {\n     props.bookmarkDestroy(post)\n     setBookmarkedPosts(bookmarkedPosts.filter(id => id !== post.id));\n    } else {\n     props.bookmarkCreate(post)\n     if (loggedInStatus === \"ログインなう\") {\n      setBookmarkedPosts([...bookmarkedPosts, post.id]);\n     }\n    }\n   }\n  const bookmarkExist = (post: any) => {\n    setBookmarkedPosts((prevBookmarkedPosts) => {\n      if (post.bookmarks && post.bookmarks[0]) {\n        return [...prevBookmarkedPosts, post.id];\n      } else {\n        return prevBookmarkedPosts.filter(id => id !== post.id);\n      }\n    });\n  }\n  const handleHeart = (post: any) => {\n    if  (heartedPosts.includes(post.id)) {\n     props.heartDestroy(post)\n     setHeartedPosts(heartedPosts.filter(id => id !== post.id));\n     post.heart_count = post.heart_count - 1\n    } else {\n     props.heartCreate(post)\n     if (loggedInStatus === \"ログインなう\") {\n      setHeartedPosts([...heartedPosts, post.id]);\n      post.heart_count = post.heart_count + 1\n     }\n    }\n  }\n  const heartExist = (post: any) => {\n    setHeartedPosts((prevHeartedPosts) => {\n      if (post.hearts && post.hearts[0]) {\n        return [...prevHeartedPosts, post.id];\n      } else {\n        return prevHeartedPosts.filter(id => id !== post.id);\n      }\n    });\n  }\n  return (\n   <Fragment>\n    <div className='profile_container'>\n      <div className='icon'>\n       <img className='image'\n         src={user.avatar.url}>\n       </img>\n      </div>\n      <div className='explanation'>\n        <a className='user_name'>{user.name}</a>\n        { user.id === props.user.id ? \n          <Link to=\"/edit\" style={{ textDecoration: 'none', cursor: 'pointer' }}>\n            <a className='edit_profile'>プロフィール編集</a>\n          </Link> \n            : \n          relationship ?\n              <a className=\"unfollow\" onClick={() => handleRelationship(user.id)}>フォロー中</a>\n                :\n              <a className=\"follow\" onClick={() => handleRelationship(user.id)}>フォローする</a>\n        }\n        <div className='user_data'>\n         <a>投稿  {postsCount ? postsCount : 0 } 件</a>\n         <a className='follow_modal' onClick={() => setFollowingIndexModal(true)}>フォロー {follow ? follow : 0 } 人</a>\n         <a className='follow_modal' onClick={() => setFollowersIndexModal(true)}>フォロワー {follower ? follower : 0 } 人</a>\n         <pre>{user.introduction}</pre>\n        </div>\n      </div>\n    </div>\n    { postExist ? \n         <></> \n           : \n         <Fragment>\n           <div className='post_not_exist'>\n             <h1>おっとこのユーザーにはコンテンツがありません...</h1>\n             <HighlightOffIcon className='highlight_off_icon' style={{fontSize: '60px'}}/>\n           </div>\n         </Fragment>\n    } \n    { postall[0] ? \n      <div className='post_container_profile'>\n       {postExist ? <></> : <h1>誰も投稿してないの！？まじ？</h1>} \n       {postall.map((value: any, key: number) => {\n         return (\n         <div className='post' key={key} onClick={() => postShow(postall[key].id)}>\n           <div className='head'>\n             <div className='icon'>\n             <img src={value.user.avatar.url}></img>\n             </div>\n               <Link to={`/profile/${value.user.id}/page/1`}\n                  onClick={(e) => {e.stopPropagation();} }>\n                     {value.user.name}\n               </Link>\n               <div className='bookmark' onClick={(e) => {e.stopPropagation(); handleBookmark(value); } }>\n                    {bookmarkedPosts.includes(value.id) ? <BookmarkIcon/> : <BookmarkBorderIcon/>}\n               </div>\n           </div>\n           <div className='middle'>\n              { value.file_type === \"image\" ? <img src={value.thumbnail.url}></img> : <></> }\n              { value.file_type === \"video\" ? \n                  <Fragment>\n                    <img src={value.thumbnail.url}></img>\n                    <PlayCircleOutlineIcon className='play_icon' style={{fontSize: '50px', color: 'white', fontWeight: '200'}}/> \n                  </Fragment>\n                     : \n                  <></> \n              }\n           </div>\n           <div className='foot'>\n             <a>{value.title}</a>\n             <div className='favorite' onClick={(e) => {e.stopPropagation(); handleHeart(value); }}>\n                  {heartedPosts.includes(value.id) ? <FavoriteIcon style={{ color: 'red' }}/> : <FavoriteBorder/>}\n             </div>\n             <a className='heart_count'>{value.heart_count}</a>\n           </div>\n         </div>\n         )\n       })}\n      </div>\n      : <></> }\n      { postall.length === 0 && postExist ? \n               <div className='post_skeleton_container_profile'>\n                 {[...Array(20).keys()].map(i =>\n                    <div className='post_skeleton'></div>\n                 )}\n               </div> :\n      <div className='pagenate_container'>\n       {pagecount > 1 ? \n       <div className='pagenate'><nav className='back'>back</nav>\n        <button className='page_move' onClick={() => postBack(currentPage)}><NavigateBeforeIcon/></button>\n        { currentPage === 1 ? \"\" :\n         <button \n           className={1 === currentPage ? 'active' : ''}\n           onClick={() => postAdd(1)}>\n              1\n          </button>}\n        {pagecount > 6 && currentPage > pagecount - 6 ? \n        page.slice(pagecount - 6, pagecount ).map((page) => (\n         <button \n          className={page === currentPage ? 'active' : ''}\n          onClick={() => postAdd(page)}>\n              {page}\n         </button>\n         )) :\n        page.slice(currentPage < 7 && currentPage !== 1 ? 1 : currentPage - 1, currentPage === 1 ? currentPage + 6 : currentPage < 7 ? 7 : currentPage + 5 ).map((page) => (\n         <button \n          className={page === currentPage ? 'active' : ''}\n          onClick={() => postAdd(page)}>\n              {page}\n         </button>\n         ))}\n        <button className='page_move' \n           onClick={() => postGo(currentPage)}>\n            <NavigateNextIcon/>\n        </button>\n        <nav className='next'>next</nav>\n       </div> : <></> }\n      </div>}\n    { followingIndexModal ? <FollowingIndex user={user} currentUser={props.user} setFollowingIndexModal={setFollowingIndexModal} \n                                            setPromptingAccountCreation={setPromptingAccountCreation}\n                                            loggedInStatus={loggedInStatus}/>\n                                             : \n                                            <></>\n    }\n    { followersIndexModal ? <FollowersIndex user={user} currentUser={props.user} setFollowersIndexModal={setFollowersIndexModal} \n                                            setPromptingAccountCreation={setPromptingAccountCreation}\n                                            loggedInStatus={loggedInStatus}/>\n                                             :\n                                            <></>\n    }\n   </Fragment>\n  )\n}\n\nexport default Profile"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC5D,OAAO,0BAA0B;AACjC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,kBAAkB,MAAM,oCAAoC;AACnE,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,cAAc,MAAM,oCAAoC;AAC/D,OAAOC,kBAAkB,MAAM,oCAAoC;AACnE,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,qBAAqB,MAAM,uCAAuC;AACzE,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,SAASC,GAAG,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAjB,QAAA,IAAAkB,SAAA;AAChC,SAASC,OAAOA,CAACC,KAAU,EAAE;EAAAC,EAAA;EAC3B,MAAMC,cAAc,GAAGF,KAAK,CAACE,cAAc;EAC3C,MAAMC,kBAAkB,GAAGH,KAAK,CAACG,kBAAkB;EACnD,MAAMC,mBAAmB,GAAGJ,KAAK,CAACI,mBAAmB;EACrD,MAAMC,2BAA2B,GAAGL,KAAK,CAACK,2BAA2B;EACrE,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAG7B,QAAQ,CAAM,EAAE,CAAC;EACzC,MAAM,CAAC8B,YAAY,EAAEC,eAAe,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACgC,MAAM,EAAEC,SAAS,CAAC,GAAGjC,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACkC,QAAQ,EAAEC,WAAW,CAAC,GAAGnC,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACoC,UAAU,EAAEC,aAAa,CAAC,GAAGrC,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACsC,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM,CAACwC,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGzC,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM0C,MAAM,GAAGrC,SAAS,CAAiC,CAAC;EAC1D,MAAMsC,EAAE,GAAGD,MAAM,CAACC,EAAE;EACpB,MAAMC,MAAM,GAAGF,MAAM,CAACE,MAAM;EAC5B,MAAMC,aAAa,GAAGC,QAAQ,CAACH,EAAE,CAAC;EAClC,MAAMI,OAAO,GAAGzC,UAAU,CAAC,CAAC;EAC5B,MAAM,CAAC0C,OAAO,EAAEC,UAAU,CAAC,GAAGjD,QAAQ,CAAM,EAAE,CAAC;EAC/C,MAAM,CAACkD,SAAS,EAAEC,YAAY,CAAC,GAAGnD,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACoD,WAAW,EAAEC,cAAc,CAAC,GAAGrD,QAAQ,CAAC6C,aAAa,CAAC;EAC7D,MAAMS,IAAI,GAAG,CAAC,GAAGC,KAAK,CAACL,SAAS,CAAC,CAACM,IAAI,CAAC,CAAC,CAAC,CAACC,GAAG,CAAEC,CAAC,IAAKA,CAAC,GAAG,CAAC,CAAC;EAC3D,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAG5D,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3D,MAAM,CAAC6D,YAAY,EAAEC,eAAe,CAAC,GAAG9D,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;EACrD,MAAM,CAAC+D,SAAS,EAAEC,YAAY,CAAC,GAAGhE,QAAQ,CAAC,IAAI,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACdgD,UAAU,CAAC,EAAE,CAAC;IACdgB,WAAW,CAACtB,EAAE,CAAC;EACjB,CAAC,EAAE,CAACA,EAAE,CAAC,CAAC;EAER1C,SAAS,CAAC,MAAM;IACdgD,UAAU,CAAC,EAAE,CAAC;IACdiB,UAAU,CAACvB,EAAE,CAAC;EAChB,CAAC,EAAE,CAACC,MAAM,EAAED,EAAE,CAAC,CAAC;EAEhB,MAAMsB,WAAW,GAAItB,EAAU,IAAK;IAClCxC,KAAK,CAACgE,GAAG,CAAE,GAAElD,GAAI,UAAS0B,EAAG,EAAC,EAAE;MAAEyB,eAAe,EAAE;IAAK,CAAC,CAAC,CACzDC,IAAI,CAACC,QAAQ,IAAI;MACd,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAI;MAC1B1C,OAAO,CAAC0C,IAAI,CAAC3C,IAAI,CAAC;MAClBK,SAAS,CAACsC,IAAI,CAACC,cAAc,CAAC;MAC9BrC,WAAW,CAACoC,IAAI,CAACE,cAAc,CAAC;MAChC1C,eAAe,CAACwC,IAAI,CAACzC,YAAY,CAAC;MAClCO,aAAa,CAACkC,IAAI,CAACG,WAAW,CAAC;MAC/BC,OAAO,CAACC,GAAG,CAACL,IAAI,CAAC;IACrB,CAAC,CAAC,CACDM,KAAK,CAACC,KAAK,IAAIH,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC,CAAC;EACzC,CAAC;EAED,MAAMG,kBAAkB,GAAIpC,EAAU,IAAK;IACzC,IAAIb,YAAY,EAAE;MACjBC,eAAe,CAAC,KAAK,CAAC;MACtBI,WAAW,CAACD,QAAQ,GAAG,CAAC,CAAC;MACzBR,mBAAmB,CAACiB,EAAE,CAAC;IACxB,CAAC,MAAM;MACN,IAAInB,cAAc,KAAK,QAAQ,EAAE;QAC/BO,eAAe,CAAC,IAAI,CAAC;QACrBI,WAAW,CAACD,QAAQ,GAAG,CAAC,CAAC;MAC3B;MACAT,kBAAkB,CAACkB,EAAE,CAAC;IACvB;EACF,CAAC;EAED,MAAMqC,QAAQ,GAAIrC,EAAU,IAAK;IAC/BI,OAAO,CAACkC,IAAI,CAAE,UAAStC,EAAG,EAAC,CAAC;EAC9B,CAAC;EAED,MAAMuB,UAAU,GAAIvB,EAAU,IAAI;IAC/BxC,KAAK,CAACgE,GAAG,CAAE,GAAElD,GAAI,SAAQ0B,EAAG,QAAO,EAAE;MAAED,MAAM,EAAE;QAAEY,IAAI,EAAEF;MAAY,CAAC;MAAEgB,eAAe,EAAE;IAAK,CAAC,CAAC,CAC9FC,IAAI,CAACC,QAAQ,IAAI;MAChB,IAAIA,QAAQ,CAACC,IAAI,CAACW,MAAM,EAAE;QACxB,MAAMX,IAAI,GAAGD,QAAQ,CAACC,IAAI,CAACY,QAAQ;QACnClC,UAAU,CAACsB,IAAI,CAAC;QAChBpB,YAAY,CAACmB,QAAQ,CAACC,IAAI,CAACa,WAAW,CAAC;QACvCT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;QACrB,KAAK,IAAIlB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGa,IAAI,CAACc,MAAM,EAAE3B,CAAC,EAAE,EAAE;UACpC4B,aAAa,CAACf,IAAI,CAACb,CAAC,CAAC,CAAC;QACxB;QACA,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGa,IAAI,CAACc,MAAM,EAAE3B,CAAC,EAAE,EAAE;UACpC6B,UAAU,CAAChB,IAAI,CAACb,CAAC,CAAC,CAAC;QACrB;QACAM,YAAY,CAAC,IAAI,CAAC;MACpB,CAAC,MAAM;QACLA,YAAY,CAAC,KAAK,CAAC;QACnBb,YAAY,CAAC,CAAC,CAAC;QACfE,cAAc,CAAC,CAAC,CAAC;QACjBsB,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACrB;IACF,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;MACdH,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEE,KAAK,CAAC;IAC/B,CAAC,CAAC;EACJ,CAAC;EACD,MAAMU,OAAO,GAAIlC,IAAY,IAAK;IAChCD,cAAc,CAACC,IAAI,CAAC;IACpBP,OAAO,CAACkC,IAAI,CAAE,YAAWtC,EAAG,SAAQW,IAAK,EAAC,CAAC;IAC3CmC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACvB,CAAC;EACD,MAAMC,QAAQ,GAAIvC,WAAmB,IAAK;IACxC,IAAIA,WAAW,KAAK,CAAC,EAAE;MACrBC,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;MAC/BL,OAAO,CAACkC,IAAI,CAAE,YAAWtC,EAAG,SAAQS,WAAW,GAAG,CAAE,EAAC,CAAC;IACtD;IACFqC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACvB,CAAC;EACD,MAAME,MAAM,GAAIxC,WAAmB,IAAK;IACtC,IAAIA,WAAW,KAAKF,SAAS,EAAE;MAC7BG,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;MAC/BL,OAAO,CAACkC,IAAI,CAAE,YAAWtC,EAAG,SAAQS,WAAW,GAAG,CAAE,EAAC,CAAC;IACxD;IACAqC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACvB,CAAC;EACD,MAAMG,cAAc,GAAIC,IAAS,IAAK;IACpC,IAAKnC,eAAe,CAACoC,QAAQ,CAACD,IAAI,CAACnD,EAAE,CAAC,EAAE;MACvCrB,KAAK,CAAC0E,eAAe,CAACF,IAAI,CAAC;MAC3BlC,kBAAkB,CAACD,eAAe,CAACsC,MAAM,CAACtD,EAAE,IAAIA,EAAE,KAAKmD,IAAI,CAACnD,EAAE,CAAC,CAAC;IACjE,CAAC,MAAM;MACNrB,KAAK,CAAC4E,cAAc,CAACJ,IAAI,CAAC;MAC1B,IAAItE,cAAc,KAAK,QAAQ,EAAE;QAChCoC,kBAAkB,CAAC,CAAC,GAAGD,eAAe,EAAEmC,IAAI,CAACnD,EAAE,CAAC,CAAC;MAClD;IACD;EACD,CAAC;EACF,MAAM2C,aAAa,GAAIQ,IAAS,IAAK;IACnClC,kBAAkB,CAAEuC,mBAAmB,IAAK;MAC1C,IAAIL,IAAI,CAACM,SAAS,IAAIN,IAAI,CAACM,SAAS,CAAC,CAAC,CAAC,EAAE;QACvC,OAAO,CAAC,GAAGD,mBAAmB,EAAEL,IAAI,CAACnD,EAAE,CAAC;MAC1C,CAAC,MAAM;QACL,OAAOwD,mBAAmB,CAACF,MAAM,CAACtD,EAAE,IAAIA,EAAE,KAAKmD,IAAI,CAACnD,EAAE,CAAC;MACzD;IACF,CAAC,CAAC;EACJ,CAAC;EACD,MAAM0D,WAAW,GAAIP,IAAS,IAAK;IACjC,IAAKjC,YAAY,CAACkC,QAAQ,CAACD,IAAI,CAACnD,EAAE,CAAC,EAAE;MACpCrB,KAAK,CAACgF,YAAY,CAACR,IAAI,CAAC;MACxBhC,eAAe,CAACD,YAAY,CAACoC,MAAM,CAACtD,EAAE,IAAIA,EAAE,KAAKmD,IAAI,CAACnD,EAAE,CAAC,CAAC;MAC1DmD,IAAI,CAACS,WAAW,GAAGT,IAAI,CAACS,WAAW,GAAG,CAAC;IACxC,CAAC,MAAM;MACNjF,KAAK,CAACkF,WAAW,CAACV,IAAI,CAAC;MACvB,IAAItE,cAAc,KAAK,QAAQ,EAAE;QAChCsC,eAAe,CAAC,CAAC,GAAGD,YAAY,EAAEiC,IAAI,CAACnD,EAAE,CAAC,CAAC;QAC3CmD,IAAI,CAACS,WAAW,GAAGT,IAAI,CAACS,WAAW,GAAG,CAAC;MACxC;IACD;EACF,CAAC;EACD,MAAMhB,UAAU,GAAIO,IAAS,IAAK;IAChChC,eAAe,CAAE2C,gBAAgB,IAAK;MACpC,IAAIX,IAAI,CAACY,MAAM,IAAIZ,IAAI,CAACY,MAAM,CAAC,CAAC,CAAC,EAAE;QACjC,OAAO,CAAC,GAAGD,gBAAgB,EAAEX,IAAI,CAACnD,EAAE,CAAC;MACvC,CAAC,MAAM;QACL,OAAO8D,gBAAgB,CAACR,MAAM,CAACtD,EAAE,IAAIA,EAAE,KAAKmD,IAAI,CAACnD,EAAE,CAAC;MACtD;IACF,CAAC,CAAC;EACJ,CAAC;EACD,oBACCxB,OAAA,CAACjB,QAAQ;IAAAyG,QAAA,gBACRxF,OAAA;MAAKyF,SAAS,EAAC,mBAAmB;MAAAD,QAAA,gBAChCxF,OAAA;QAAKyF,SAAS,EAAC,MAAM;QAAAD,QAAA,eACpBxF,OAAA;UAAKyF,SAAS,EAAC,OAAO;UACpBC,GAAG,EAAEjF,IAAI,CAACkF,MAAM,CAAC7F;QAAI;UAAA8F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eACN/F,OAAA;QAAKyF,SAAS,EAAC,aAAa;QAAAD,QAAA,gBAC1BxF,OAAA;UAAGyF,SAAS,EAAC,WAAW;UAAAD,QAAA,EAAE/E,IAAI,CAACuF;QAAI;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACtCtF,IAAI,CAACe,EAAE,KAAKrB,KAAK,CAACM,IAAI,CAACe,EAAE,gBACzBxB,OAAA,CAACf,IAAI;UAACgH,EAAE,EAAC,OAAO;UAACC,KAAK,EAAE;YAAEC,cAAc,EAAE,MAAM;YAAEC,MAAM,EAAE;UAAU,CAAE;UAAAZ,QAAA,eACpExF,OAAA;YAAGyF,SAAS,EAAC,cAAc;YAAAD,QAAA,EAAC;UAAQ;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpC,CAAC,GAEPpF,YAAY,gBACRX,OAAA;UAAGyF,SAAS,EAAC,UAAU;UAACY,OAAO,EAAEA,CAAA,KAAMzC,kBAAkB,CAACnD,IAAI,CAACe,EAAE,CAAE;UAAAgE,QAAA,EAAC;QAAK;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,gBAE7E/F,OAAA;UAAGyF,SAAS,EAAC,QAAQ;UAACY,OAAO,EAAEA,CAAA,KAAMzC,kBAAkB,CAACnD,IAAI,CAACe,EAAE,CAAE;UAAAgE,QAAA,EAAC;QAAM;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAElF/F,OAAA;UAAKyF,SAAS,EAAC,WAAW;UAAAD,QAAA,gBACzBxF,OAAA;YAAAwF,QAAA,GAAG,gBAAI,EAACvE,UAAU,GAAGA,UAAU,GAAG,CAAC,EAAE,SAAE;UAAA;YAAA2E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC3C/F,OAAA;YAAGyF,SAAS,EAAC,cAAc;YAACY,OAAO,EAAEA,CAAA,KAAMjF,sBAAsB,CAAC,IAAI,CAAE;YAAAoE,QAAA,GAAC,2BAAK,EAAC3E,MAAM,GAAGA,MAAM,GAAG,CAAC,EAAE,SAAE;UAAA;YAAA+E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC1G/F,OAAA;YAAGyF,SAAS,EAAC,cAAc;YAACY,OAAO,EAAEA,CAAA,KAAM/E,sBAAsB,CAAC,IAAI,CAAE;YAAAkE,QAAA,GAAC,iCAAM,EAACzE,QAAQ,GAAGA,QAAQ,GAAG,CAAC,EAAE,SAAE;UAAA;YAAA6E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC/G/F,OAAA;YAAAwF,QAAA,EAAM/E,IAAI,CAAC6F;UAAY;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EACJnD,SAAS,gBACN5C,OAAA,CAAAC,SAAA,mBAAI,CAAC,gBAELD,OAAA,CAACjB,QAAQ;MAAAyG,QAAA,eACPxF,OAAA;QAAKyF,SAAS,EAAC,gBAAgB;QAAAD,QAAA,gBAC7BxF,OAAA;UAAAwF,QAAA,EAAI;QAAyB;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClC/F,OAAA,CAACN,gBAAgB;UAAC+F,SAAS,EAAC,oBAAoB;UAACS,KAAK,EAAE;YAACK,QAAQ,EAAE;UAAM;QAAE;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1E;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAEdlE,OAAO,CAAC,CAAC,CAAC,gBACV7B,OAAA;MAAKyF,SAAS,EAAC,wBAAwB;MAAAD,QAAA,GACrC5C,SAAS,gBAAG5C,OAAA,CAAAC,SAAA,mBAAI,CAAC,gBAAGD,OAAA;QAAAwF,QAAA,EAAI;MAAc;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAC3ClE,OAAO,CAACS,GAAG,CAAC,CAACkE,KAAU,EAAEC,GAAW,KAAK;QACxC,oBACAzG,OAAA;UAAKyF,SAAS,EAAC,MAAM;UAAWY,OAAO,EAAEA,CAAA,KAAMxC,QAAQ,CAAChC,OAAO,CAAC4E,GAAG,CAAC,CAACjF,EAAE,CAAE;UAAAgE,QAAA,gBACvExF,OAAA;YAAKyF,SAAS,EAAC,MAAM;YAAAD,QAAA,gBACnBxF,OAAA;cAAKyF,SAAS,EAAC,MAAM;cAAAD,QAAA,eACrBxF,OAAA;gBAAK0F,GAAG,EAAEc,KAAK,CAAC/F,IAAI,CAACkF,MAAM,CAAC7F;cAAI;gBAAA8F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClC,CAAC,eACJ/F,OAAA,CAACf,IAAI;cAACgH,EAAE,EAAG,YAAWO,KAAK,CAAC/F,IAAI,CAACe,EAAG,SAAS;cAC1C6E,OAAO,EAAGK,CAAC,IAAK;gBAACA,CAAC,CAACC,eAAe,CAAC,CAAC;cAAC,CAAG;cAAAnB,QAAA,EACpCgB,KAAK,CAAC/F,IAAI,CAACuF;YAAI;cAAAJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB,CAAC,eACP/F,OAAA;cAAKyF,SAAS,EAAC,UAAU;cAACY,OAAO,EAAGK,CAAC,IAAK;gBAACA,CAAC,CAACC,eAAe,CAAC,CAAC;gBAAEjC,cAAc,CAAC8B,KAAK,CAAC;cAAE,CAAG;cAAAhB,QAAA,EACpFhD,eAAe,CAACoC,QAAQ,CAAC4B,KAAK,CAAChF,EAAE,CAAC,gBAAGxB,OAAA,CAACZ,YAAY;gBAAAwG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC,gBAAG/F,OAAA,CAACX,kBAAkB;gBAAAuG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7E,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eACN/F,OAAA;YAAKyF,SAAS,EAAC,QAAQ;YAAAD,QAAA,GAClBgB,KAAK,CAACI,SAAS,KAAK,OAAO,gBAAG5G,OAAA;cAAK0F,GAAG,EAAEc,KAAK,CAACK,SAAS,CAAC/G;YAAI;cAAA8F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,gBAAG/F,OAAA,CAAAC,SAAA,mBAAI,CAAC,EAC3EuG,KAAK,CAACI,SAAS,KAAK,OAAO,gBACzB5G,OAAA,CAACjB,QAAQ;cAAAyG,QAAA,gBACPxF,OAAA;gBAAK0F,GAAG,EAAEc,KAAK,CAACK,SAAS,CAAC/G;cAAI;gBAAA8F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACrC/F,OAAA,CAACL,qBAAqB;gBAAC8F,SAAS,EAAC,WAAW;gBAACS,KAAK,EAAE;kBAACK,QAAQ,EAAE,MAAM;kBAAEO,KAAK,EAAE,OAAO;kBAAEC,UAAU,EAAE;gBAAK;cAAE;gBAAAnB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpG,CAAC,gBAEX/F,OAAA,CAAAC,SAAA,mBAAI,CAAC;UAAA;YAAA2F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEP,CAAC,eACN/F,OAAA;YAAKyF,SAAS,EAAC,MAAM;YAAAD,QAAA,gBACnBxF,OAAA;cAAAwF,QAAA,EAAIgB,KAAK,CAACQ;YAAK;cAAApB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpB/F,OAAA;cAAKyF,SAAS,EAAC,UAAU;cAACY,OAAO,EAAGK,CAAC,IAAK;gBAACA,CAAC,CAACC,eAAe,CAAC,CAAC;gBAAEzB,WAAW,CAACsB,KAAK,CAAC;cAAE,CAAE;cAAAhB,QAAA,EAChF9C,YAAY,CAACkC,QAAQ,CAAC4B,KAAK,CAAChF,EAAE,CAAC,gBAAGxB,OAAA,CAACV,YAAY;gBAAC4G,KAAK,EAAE;kBAAEY,KAAK,EAAE;gBAAM;cAAE;gBAAAlB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC,gBAAG/F,OAAA,CAACT,cAAc;gBAAAqG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/F,CAAC,eACN/F,OAAA;cAAGyF,SAAS,EAAC,aAAa;cAAAD,QAAA,EAAEgB,KAAK,CAACpB;YAAW;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C,CAAC;QAAA,GA9BmBU,GAAG;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OA+BzB,CAAC;MAER,CAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,gBACJ/F,OAAA,CAAAC,SAAA,mBAAI,CAAC,EACL4B,OAAO,CAACqC,MAAM,KAAK,CAAC,IAAItB,SAAS,gBAC1B5C,OAAA;MAAKyF,SAAS,EAAC,iCAAiC;MAAAD,QAAA,EAC7C,CAAC,GAAGpD,KAAK,CAAC,EAAE,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,iBACzBvC,OAAA;QAAKyF,SAAS,EAAC;MAAe;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CACvC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,gBACf/F,OAAA;MAAKyF,SAAS,EAAC,oBAAoB;MAAAD,QAAA,EACjCzD,SAAS,GAAG,CAAC,gBACd/B,OAAA;QAAKyF,SAAS,EAAC,UAAU;QAAAD,QAAA,gBAACxF,OAAA;UAAKyF,SAAS,EAAC,MAAM;UAAAD,QAAA,EAAC;QAAI;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACzD/F,OAAA;UAAQyF,SAAS,EAAC,WAAW;UAACY,OAAO,EAAEA,CAAA,KAAM7B,QAAQ,CAACvC,WAAW,CAAE;UAAAuD,QAAA,eAACxF,OAAA,CAACR,kBAAkB;YAAAoG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAChG9D,WAAW,KAAK,CAAC,GAAG,EAAE,gBACvBjC,OAAA;UACEyF,SAAS,EAAE,CAAC,KAAKxD,WAAW,GAAG,QAAQ,GAAG,EAAG;UAC7CoE,OAAO,EAAEA,CAAA,KAAMhC,OAAO,CAAC,CAAC,CAAE;UAAAmB,QAAA,EAAC;QAE5B;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EACVhE,SAAS,GAAG,CAAC,IAAIE,WAAW,GAAGF,SAAS,GAAG,CAAC,GAC7CI,IAAI,CAAC8E,KAAK,CAAClF,SAAS,GAAG,CAAC,EAAEA,SAAU,CAAC,CAACO,GAAG,CAAEH,IAAI,iBAC9CnC,OAAA;UACCyF,SAAS,EAAEtD,IAAI,KAAKF,WAAW,GAAG,QAAQ,GAAG,EAAG;UAChDoE,OAAO,EAAEA,CAAA,KAAMhC,OAAO,CAAClC,IAAI,CAAE;UAAAqD,QAAA,EACxBrD;QAAI;UAAAyD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CACP,CAAC,GACH5D,IAAI,CAAC8E,KAAK,CAAChF,WAAW,GAAG,CAAC,IAAIA,WAAW,KAAK,CAAC,GAAG,CAAC,GAAGA,WAAW,GAAG,CAAC,EAAEA,WAAW,KAAK,CAAC,GAAGA,WAAW,GAAG,CAAC,GAAGA,WAAW,GAAG,CAAC,GAAG,CAAC,GAAGA,WAAW,GAAG,CAAE,CAAC,CAACK,GAAG,CAAEH,IAAI,iBAC7JnC,OAAA;UACCyF,SAAS,EAAEtD,IAAI,KAAKF,WAAW,GAAG,QAAQ,GAAG,EAAG;UAChDoE,OAAO,EAAEA,CAAA,KAAMhC,OAAO,CAAClC,IAAI,CAAE;UAAAqD,QAAA,EACxBrD;QAAI;UAAAyD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CACP,CAAC,eACH/F,OAAA;UAAQyF,SAAS,EAAC,WAAW;UAC1BY,OAAO,EAAEA,CAAA,KAAM5B,MAAM,CAACxC,WAAW,CAAE;UAAAuD,QAAA,eAClCxF,OAAA,CAACP,gBAAgB;YAAAmG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC,eACT/F,OAAA;UAAKyF,SAAS,EAAC,MAAM;UAAAD,QAAA,EAAC;QAAI;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CAAC,gBAAG/F,OAAA,CAAAC,SAAA,mBAAI;IAAC;MAAA2F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,EACN5E,mBAAmB,gBAAGnB,OAAA,CAACJ,cAAc;MAACa,IAAI,EAAEA,IAAK;MAACyG,WAAW,EAAE/G,KAAK,CAACM,IAAK;MAACW,sBAAsB,EAAEA,sBAAuB;MACpFZ,2BAA2B,EAAEA,2BAA4B;MACzDH,cAAc,EAAEA;IAAe;MAAAuF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,gBAEjC/F,OAAA,CAAAC,SAAA,mBAAI,CAAC,EAE3CoB,mBAAmB,gBAAGrB,OAAA,CAACH,cAAc;MAACY,IAAI,EAAEA,IAAK;MAACyG,WAAW,EAAE/G,KAAK,CAACM,IAAK;MAACa,sBAAsB,EAAEA,sBAAuB;MACpFd,2BAA2B,EAAEA,2BAA4B;MACzDH,cAAc,EAAEA;IAAe;MAAAuF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,gBAEjC/F,OAAA,CAAAC,SAAA,mBAAI,CAAC;EAAA;IAAA2F,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEpC,CAAC;AAEd;AAAC3F,EAAA,CA7RQF,OAAO;EAAA,QAYChB,SAAS,EAIRC,UAAU;AAAA;AAAAgI,EAAA,GAhBnBjH,OAAO;AA+RhB,eAAeA,OAAO;AAAA,IAAAiH,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}