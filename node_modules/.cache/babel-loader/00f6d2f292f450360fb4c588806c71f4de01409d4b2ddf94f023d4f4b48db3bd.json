{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/app/src/components/FollowersIndex.tsx\",\n  _s = $RefreshSig$();\nimport { Fragment, useEffect, useState, useContext } from 'react';\nimport { MainContext } from '../App';\nimport '../ScssFile/FollowersIndex.scss';\nimport axios from 'axios';\nimport { Link } from \"react-router-dom\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport { url } from \"../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction FollowersIndex(props) {\n  _s();\n  const context = useContext(MainContext);\n  const loggedInStatus = context.loggedInStatus;\n  const user = props.user;\n  const currentUser = context.user;\n  const setFollowersIndexModal = props.setFollowersIndexModal;\n  const setPromptingAccountCreation = context.setPromptingAccountCreation;\n  const [followers, setFollowers] = useState([]);\n  useEffect(() => {\n    user && openFollowModal(user.id);\n  }, []);\n  const openFollowModal = id => {\n    axios.get(`${url}/followers/${id}`, {\n      withCredentials: true\n    }).then(response => {\n      const data = response.data;\n      setFollowers(data.followers);\n      console.log(data.followers);\n      console.log(data.count);\n    });\n  };\n  const handleRelationship = (value, key) => {\n    if (value.following) {\n      relationshipDestroy(value.id);\n    } else {\n      relationshipCreate(value.id);\n    }\n  };\n  const relationshipCreate = id => {\n    if (loggedInStatus === \"ログインなう\") {\n      axios.post(\"http://localhost:3001/relationships\", {\n        user_id: id\n      }, {\n        withCredentials: true\n      }).then(response => {\n        if (response.data.status) {\n          console.log(\"フォロー\");\n          user && openFollowModal(user.id);\n          setTimeout(() => {\n            console.log(followers);\n          }, 6000);\n        }\n      }).catch(error => {\n        console.log(\"エラー\");\n      });\n    } else {\n      setPromptingAccountCreation(true);\n    }\n  };\n  const relationshipDestroy = id => {\n    axios.delete(`http://localhost:3001/relationships/${id}`, {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.status) {\n        console.log(response.data.post);\n        user && openFollowModal(user.id);\n        setTimeout(() => {\n          console.log(followers);\n        }, 6000);\n      }\n    }).catch(error => {\n      console.log(\"エラー\");\n    });\n  };\n  const closeModal = () => {\n    setFollowersIndexModal(false);\n  };\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"back_display2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }, this), user && user.id && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"followers_index_modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u30D5\\u30A9\\u30ED\\u30EF\\u30FC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"followers_innner\",\n        children: followers.map((value, key) => {\n          return /*#__PURE__*/_jsxDEV(Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"followers_content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"icon\",\n                children: value.avatar.url && /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: value.avatar.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 39\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this), value.id && /*#__PURE__*/_jsxDEV(Link, {\n                to: `/profile/${value.id}/page/1`,\n                onClick: () => closeModal(),\n                className: \"user_name\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: value.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 123\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 31\n              }, this), currentUser && currentUser.id === value.id ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : currentUser && value.following && currentUser.id ? /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"unfollow\",\n                onClick: () => handleRelationship(value, key),\n                children: \"\\u30D5\\u30A9\\u30ED\\u30FC\\u4E2D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"follow\",\n                onClick: () => handleRelationship(value, key),\n                children: \"\\u30D5\\u30A9\\u30ED\\u30FC\\u3059\\u308B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 14\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"close\",\n        onClick: () => closeModal(),\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 59\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 4\n  }, this);\n}\n_s(FollowersIndex, \"UF0TUtn22vO8WjKy+uxmxWmxoWI=\");\n_c = FollowersIndex;\nexport default FollowersIndex;\nvar _c;\n$RefreshReg$(_c, \"FollowersIndex\");","map":{"version":3,"names":["Fragment","useEffect","useState","useContext","MainContext","axios","Link","CloseIcon","url","jsxDEV","_jsxDEV","_Fragment","FollowersIndex","props","_s","context","loggedInStatus","user","currentUser","setFollowersIndexModal","setPromptingAccountCreation","followers","setFollowers","openFollowModal","id","get","withCredentials","then","response","data","console","log","count","handleRelationship","value","key","following","relationshipDestroy","relationshipCreate","post","user_id","status","setTimeout","catch","error","delete","closeModal","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","avatar","src","to","onClick","name","_c","$RefreshReg$"],"sources":["/usr/src/app/app/src/components/FollowersIndex.tsx"],"sourcesContent":["import { Fragment, useEffect, useState, useContext } from 'react'\nimport { MainContext } from '../App';\nimport '../ScssFile/FollowersIndex.scss'\nimport axios from 'axios';\nimport { Link } from \"react-router-dom\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport { url } from \"../config\";\nimport { TypeFollowers, TypeUser } from '../TypeDefinition/Type';\ntype Props = {\n  user: TypeUser | undefined;\n  setFollowersIndexModal: React.Dispatch<React.SetStateAction<boolean>>\n}\nfunction FollowersIndex(props: Props) {\n  const context = useContext(MainContext)\n  const loggedInStatus = context.loggedInStatus\n  const user = props.user\n  const currentUser = context.user\n  const setFollowersIndexModal = props.setFollowersIndexModal\n  const setPromptingAccountCreation = context.setPromptingAccountCreation\n  const [followers, setFollowers] = useState<TypeFollowers[]>([])\n  useEffect(() => {\n    user && openFollowModal(user.id)\n  }, [])\n  const openFollowModal = (id: number) => {\n    axios.get(`${url}/followers/${id}`, { withCredentials: true })\n    .then(response => {\n      const data = response.data\n      setFollowers(data.followers)\n      console.log(data.followers)\n      console.log(data.count)\n    })\n  }\n\n  const handleRelationship = (value: TypeFollowers, key: number) => {\n    if (value.following) {\n     relationshipDestroy(value.id)\n    } else {\n     relationshipCreate(value.id)\n    }\n  }\n\n\n  const relationshipCreate = (id: number) => {\n   if (loggedInStatus === \"ログインなう\") {\n    axios.post(\"http://localhost:3001/relationships\",  { user_id: id },  { withCredentials: true })\n    .then(response => {\n      if (response.data.status) {\n        console.log(\"フォロー\")\n        user && openFollowModal(user.id)\n        setTimeout(() => {\n          console.log(followers);\n        }, 6000);\n      }\n    })\n    .catch(error => {\n      console.log(\"エラー\")\n    })\n   } else {\n      setPromptingAccountCreation(true)\n   }\n  }\n\n  const relationshipDestroy = (id: number) => {\n    axios.delete(`http://localhost:3001/relationships/${id}`, { withCredentials: true })\n    .then(response => {\n      if (response.data.status) {\n        console.log(response.data.post)\n        user && openFollowModal(user.id)\n        setTimeout(() => {\n          console.log(followers);\n        }, 6000);\n      }\n    })\n    .catch(error => {\n      console.log(\"エラー\")\n   })\n  }\n\n  const closeModal = () => {\n    setFollowersIndexModal(false)\n  }\n\n  return (\n   <Fragment>\n    <div className='back_display2'></div>\n    { user && user.id && (\n    <div className='followers_index_modal'>\n      <h3>フォロワー</h3>\n      <div className='followers_innner'>\n          {followers.map((value: TypeFollowers, key: number) => {\n            return (\n             <Fragment>\n               <div className='followers_content'>\n                <div className='icon'>\n                { value.avatar.url && <img src={value.avatar.url}></img> }\n                </div>\n                { value.id && <Link to={`/profile/${value.id}/page/1`} onClick={() => closeModal()} className='user_name'><a>{value.name}</a></Link> }\n                { currentUser && currentUser.id === value.id ? \n                  <></>\n                  : \n                  currentUser && value.following && currentUser.id ?\n                    <a className=\"unfollow\" onClick={() => handleRelationship(value, key)}>フォロー中</a>\n                      :\n                    <a className=\"follow\" onClick={() => handleRelationship(value, key)}>フォローする</a>\n                }\n               </div>\n             </Fragment>\n            )\n          })}\n      </div>\n      <div className='close' onClick={() => closeModal()}><a><CloseIcon /></a></div>\n    </div>\n    )}\n   </Fragment>\n  )\n}\n\nexport default FollowersIndex"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}